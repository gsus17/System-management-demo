<div class="general-container">
  <mat-card>
    <mat-card-title i18n
                    class="person-list-title">
      Listado de Personas
    </mat-card-title>

    <mat-card-content>
      <div class="virtual-viewport">
        <mat-accordion>
          <mat-expansion-panel *ngFor="let person of personList"
                               class="virtual-item">
            <mat-expansion-panel-header>
              <div fxFlex
                   fxLayout="row">
                <div fxFlex="5%"
                     fxLayout="row"
                     fxLayoutAlign="start center">
                  <div [ngClass]="{
                    'active-status' : person.estado === 'Active',
                    'inactive-status' : person.estado === 'Inactive',
                    'suspended-status' : person.estado === 'Suspended'}">
                    {{person.estado | slice:0:1}}
                  </div>
                </div>
                <div fxFlex="5%"
                     fxLayout="row"
                     fxLayoutAlign="start center"
                     fxLayoutAlign.xs="center center"> {{person.id}}</div>
                <div fxFlex
                     fxLayoutAlign.sm="center start"
                     fxLayoutAlign.xs="center center"
                     fxLayout="column">
                  <span class="mat-body-2">{{person.nombreCompleto}}</span>
                  <span class="mat-caption">{{person.eMail}}</span>
                </div>
                <div fxFlex
                     fxHide.xs="true"
                     fxHide.sm="true"
                     fxLayoutAlign="center start"
                     fxLayout="column">
                  <span class="mat-body-2">{{person.nacionalidad}}</span>
                  <span class="mat-caption">{{person.sexo}}</span>
                </div>
                <div fxFlex
                     fxHide.xs="true"
                     fxHide.sm="true"
                     fxLayout="row"
                     fxLayoutAlign="center center">
                  <span class="mat-caption">{{person.fechaCreo | date: 'yyyy-MM-dd'}}</span>
                </div>
                <div class="icon-container"
                     fxLayout="row"
                     fxLayoutAlign="space-between center">
                  <button mat-icon-button
                          matTooltip="Eliminar"
                          (click)="deletePersona(person.id)">
                    <mat-icon class="mat-18">delete_forever</mat-icon>
                  </button>
                  <button mat-icon-button
                          matTooltip="Editar"
                          (click)="editPerson(person.id)">
                    <mat-icon class="mat-18">mode_edit</mat-icon>
                  </button>
                  <button mat-icon-button
                          [matMenuTriggerFor]="menu">
                    <mat-icon>more_vert</mat-icon>
                  </button>
                  <mat-menu #menu="matMenu">
                    <button mat-menu-item
                            (click)="editPerson(person.id)"
                            i18n>Editar</button>
                    <button mat-menu-item
                            (click)="deletePersona(person.id)"
                            i18n>Eliminar</button>
                  </mat-menu>
                </div>
              </div>
            </mat-expansion-panel-header>

            <div fxFlex
                 class="expansion-content"
                 fxLayout="row">
              <div fxLayout="row"
                   fxFlex="8%"
                   class="first-section-details">
                <div fxLayout="column"
                     fxFlex>
                  <div fxLayout="row"
                       fxHide.xs="true">
                    <span class="label-person-id">{{person.id}}</span>
                  </div>

                  <div fxLayout="row"
                       fxFlex="70%"
                       [ngClass]="{
                    'active-status-label' : person.estado === 'Active',
                    'inactive-status-label' : person.estado === 'Inactive',
                    'suspended-status-label' : person.estado === 'Suspended'}">
                    {{person.estado}}
                  </div>

                  <div fxLayout="column"
                       fxLayoutAlign="center center">
                    <div fxLayout="row">
                      <span class="mat-title">{{person.fechaActualizo | date:'yyyy'}}</span>
                    </div>
                    <div fxLayout="row">
                      <span>{{person.fechaActualizo | date : 'dd MMM'}}</span>
                    </div>

                  </div>
                </div>
              </div>
              <div fxLayout="row"
                   fxLayoutAlign.xs="center center"
                   fxFlex="64%">

                <div fxLayout="column"
                     fxLayoutAlign="space-between start">
                  <div fxLayout="column">
                    <span class="mat-caption label-caption"
                          i18n>
                      Nombre
                    </span>
                    <span class="mat-caption">
                      {{person.nombreCompleto}}
                    </span>
                  </div>
                  <div fxLayout="column">
                    <span class="mat-caption label-caption"
                          i18n>
                      Email
                    </span>
                    <span class="mat-caption">
                      {{person.eMail}}
                    </span>
                  </div>
                  <div fxLayout="column">
                    <div fxLayout="row"
                         fxLayoutAlign="start center">
                      <mat-icon class="at-icons">speaker_notes</mat-icon>

                      <span class="mat-caption label-caption"
                            i18n>
                        Observaciones
                      </span>
                    </div>
                    <span class="mat-caption">
                      {{person.obs}}
                    </span>
                  </div>
                </div>

              </div>
              <div fxLayout="row"
                   fxFlex="20%">
                <div fxLayout="column">
                  <div class="mat-caption label-caption"
                       i18n>Ahorro</div>
                  <div fxLayout="row">
                    <span class="mat-title">{{person.totalAhorro | currency}}</span>
                    <span class="mat-caption">(ARS)</span>
                  </div>
                </div>
              </div>
            </div>
          </mat-expansion-panel>
        </mat-accordion>

        <div class="no-results-container"
             *ngIf="!personList.length > 0"
             fxFlex
             fxLayout="column"
             fxLayoutAlign="center center">

          <img class="no-results-img"
               src="../assets/img/no-results-persona.png">
          <div fxLayout="row"
               fxLayoutAlign="center center">

            <span class="msg-no-results"
                  fxFlex="70">No hay personas cargadas que apliquen al filtro.</span>
          </div>
        </div>
      </div>

      <div fxLayout="row"
           class="buttom-container"
           fxLayoutAlign="end center">
        <div>
          <button mat-fab
                  matTooltip="Agregar una persona"
                  (click)="addPerson()">
            <mat-icon>add</mat-icon>
          </button>
        </div>
      </div>
    </mat-card-content>

    <mat-paginator [length]="paginator.length"
                   [pageSize]="paginator.pageSize"
                   [pageSizeOptions]="paginator.pageSizeOptions"
                   (page)="changePaginator($event)">
    </mat-paginator>
  </mat-card>
</div>
